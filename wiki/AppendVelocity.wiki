== 背景 ==

 本人在公司项目中使用了近两年的velocity，根据我自己的实际项目需要，在guzz中增加了很多velocity支持。
 
 以前放在halo-cloud工程中，由于具备通用性，在 guzz 1.3.1 版，将其中完全通用的部分挪到了guzz主项目中。


== guzz对velocity的支持 ==

 默认的动态拼接SQL，基于velocity实现。详细信息 [TutorialTemplatedSQLService]

 支持MMVC架构，Velocity也提供了类似JSP taglib的支持。[TutorialTaglib JSP Taglib介绍]

 对Velocity补充的其他自定义标签【Velocity中称做Directive】。


== Guzz's Velocity Directive ==

 如果你用过 [TutorialTaglib Guzz JSP Taglib] ，Velocity Directive 就是翻版。
 
 可以直接理解为在Velocity模板中也可以通过声明的方式读取数据库数据，对字符串进行xml转义，过滤javascript等。

*Guzz提供的Directive：*

|| *标签*  || *用途*  || *标签体内可否写其他代码*  ||
|| isEmpty  || 判断条件是否为空。 为空的条件是：如果 param 为null，算做空；如果 param 为String字符串，且 param.trim().length() == 0，算作空；如果 param 为Collection集合，且 集合为空，则算作空；如果 param 为数组，且数组长度为0，则算作空；其他情况，视作不为空。 || 可以 ||
|| notEmpty  || 与isEmpty相反|| 可以||
|| escapeXml  || 输出标签。对xml进行转义。|| 不可以||
|| escapeJS  || 输出标签。过滤html javascript代码|| 不可以||
|| utf8encoding  || 输出标签。将参数按照utf-8编码后输出 || 不可以||
|| guzzBoundary  || 定义条件范围。在此标签内的所有标签，都将自动获取其设定的查询条件。  || 可以  ||
|| guzzAddLimit  || 对当前的g:boundary中增加一个查询条件。 || 不可以  ||
|| guzzAddInLimit  || 对当前的g:boundary中增加一个in操作查询条件。 || 不可以  ||
|| guzzCount  || 执行统计操作  || 不可以  ||
|| guzzGet  || 执行list操作，并读取list的第一个对象。  || 不可以  ||
|| guzzList  || 读取一个列表。  || 不可以  ||
|| guzzPage  || 读取一页对象。返回的对象默认为org.guzz.dao.PageFlip 对象。  || 不可以  ||
|| guzzInc  || 按照主键对域对象的1个字段进行自增操作。g:inc需要配置 [AppendCoreService 计数器更新队列服务] 方可生效。  || 不可以  ||

 

 
 
 